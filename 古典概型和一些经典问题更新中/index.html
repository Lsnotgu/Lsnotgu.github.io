<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>古典概型和一些经典问题(更新中) | Another archive</title>
<meta name="title" content="古典概型和一些经典问题(更新中)" />
<meta name="description" content="最基础的一些内容 概率三公理：非负；和为1；互斥可加 古典概率：有限个&#43;等可能 1 古典概型中的生日问题 1.1 问题的引入 2014年的巴西世界杯，共有32支球队参与。其中有16支球队的球员有同天生日的情况。如巴西队的Hulk和Paulinho，他们的生日都是7月25号。我们知道，一支完整的足球队人数为23人，那么2014年，半数球队有队员同天生日，是否是偶然的呢？
1.2 概率的角度 我们先来解决这个问题：假设每个人的生日在365天中任意一天的概率是相同的，那么23人中，至少两人的生日在同一天的概率是多少？
从问题的反面来考虑会比较容易，记事件$A$为所有人的生日都不同，那么这个事件的反面事件$B$就是至少两人的生日在同一天。我们所要求的就是： $$P(B)=1-P(A)$$ 考察事件$A$：由于每个人的生日在一年中任何一天的概率是相同的，因此分母（所有可能的组合）为：$365^{23}$，即每个人的生日都有可能在365天中任意一天。分子为：$P_{365}^{23}$，可以这么考虑：第1个人选365天中任意一天，第2个人在剩下364天里选一天&hellip;以此类推。因此，最终我们要计算的概率： $$P(B)=1-\frac{365\cdot364\cdot...\cdot(365-23&#43;1)}{365^{23}}\approx0.507$$ 令人惊讶的是，这个概率竟然在50%左右！2014世界杯共有32支球队参加，每支球队有队员同天生日的概率大概是50%，那么计算一下期望，会发现大约有16支球队的球员存在同天生日的情况，与实际情况完全相符。
1.3 考虑$n$个人的情况 这似乎有些反直觉，现在我们考虑：$n(n \ge 2)$ 的情况，即$n$个人中，至少两人的生日在同一天。将概率式改写为函数，其自变量$n$表示人数，于是有： $$f(n)=1-\frac{P_{365}^{n}}{365^{n}}$$ 使用Python来绘制这个函数图像:
import matplotlib.pyplot as plt import math # Define the function f(n) def f(n): if n &lt;= 1: return 0 else: p_a = math.perm(365, n)/(365**n) return round(1 - p_a, 5) # Generate values n_values = list(range(1,101)) f_values = [f(n) for n in n_values] # Plot f(n) plt." />
<meta name="keywords" content="math,probability," />


<meta property="og:url" content="https://lsnotgu.github.io/%E5%8F%A4%E5%85%B8%E6%A6%82%E5%9E%8B%E5%92%8C%E4%B8%80%E4%BA%9B%E7%BB%8F%E5%85%B8%E9%97%AE%E9%A2%98%E6%9B%B4%E6%96%B0%E4%B8%AD/">
  <meta property="og:site_name" content="Another archive">
  <meta property="og:title" content="古典概型和一些经典问题(更新中)">
  <meta property="og:description" content="最基础的一些内容 概率三公理：非负；和为1；互斥可加 古典概率：有限个&#43;等可能 1 古典概型中的生日问题 1.1 问题的引入 2014年的巴西世界杯，共有32支球队参与。其中有16支球队的球员有同天生日的情况。如巴西队的Hulk和Paulinho，他们的生日都是7月25号。我们知道，一支完整的足球队人数为23人，那么2014年，半数球队有队员同天生日，是否是偶然的呢？
1.2 概率的角度 我们先来解决这个问题：假设每个人的生日在365天中任意一天的概率是相同的，那么23人中，至少两人的生日在同一天的概率是多少？
从问题的反面来考虑会比较容易，记事件$A$为所有人的生日都不同，那么这个事件的反面事件$B$就是至少两人的生日在同一天。我们所要求的就是： $$P(B)=1-P(A)$$ 考察事件$A$：由于每个人的生日在一年中任何一天的概率是相同的，因此分母（所有可能的组合）为：$365^{23}$，即每个人的生日都有可能在365天中任意一天。分子为：$P_{365}^{23}$，可以这么考虑：第1个人选365天中任意一天，第2个人在剩下364天里选一天…以此类推。因此，最终我们要计算的概率： $$P(B)=1-\frac{365\cdot364\cdot...\cdot(365-23&#43;1)}{365^{23}}\approx0.507$$ 令人惊讶的是，这个概率竟然在50%左右！2014世界杯共有32支球队参加，每支球队有队员同天生日的概率大概是50%，那么计算一下期望，会发现大约有16支球队的球员存在同天生日的情况，与实际情况完全相符。
1.3 考虑$n$个人的情况 这似乎有些反直觉，现在我们考虑：$n(n \ge 2)$ 的情况，即$n$个人中，至少两人的生日在同一天。将概率式改写为函数，其自变量$n$表示人数，于是有： $$f(n)=1-\frac{P_{365}^{n}}{365^{n}}$$ 使用Python来绘制这个函数图像:
import matplotlib.pyplot as plt import math # Define the function f(n) def f(n): if n &lt;= 1: return 0 else: p_a = math.perm(365, n)/(365**n) return round(1 - p_a, 5) # Generate values n_values = list(range(1,101)) f_values = [f(n) for n in n_values] # Plot f(n) plt.">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2024-08-08T21:29:42+08:00">
    <meta property="article:modified_time" content="2024-08-08T21:29:42+08:00">
    <meta property="article:tag" content="Math">
    <meta property="article:tag" content="Probability">




  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="古典概型和一些经典问题(更新中)">
  <meta name="twitter:description" content="最基础的一些内容 概率三公理：非负；和为1；互斥可加 古典概率：有限个&#43;等可能 1 古典概型中的生日问题 1.1 问题的引入 2014年的巴西世界杯，共有32支球队参与。其中有16支球队的球员有同天生日的情况。如巴西队的Hulk和Paulinho，他们的生日都是7月25号。我们知道，一支完整的足球队人数为23人，那么2014年，半数球队有队员同天生日，是否是偶然的呢？
1.2 概率的角度 我们先来解决这个问题：假设每个人的生日在365天中任意一天的概率是相同的，那么23人中，至少两人的生日在同一天的概率是多少？
从问题的反面来考虑会比较容易，记事件$A$为所有人的生日都不同，那么这个事件的反面事件$B$就是至少两人的生日在同一天。我们所要求的就是： $$P(B)=1-P(A)$$ 考察事件$A$：由于每个人的生日在一年中任何一天的概率是相同的，因此分母（所有可能的组合）为：$365^{23}$，即每个人的生日都有可能在365天中任意一天。分子为：$P_{365}^{23}$，可以这么考虑：第1个人选365天中任意一天，第2个人在剩下364天里选一天…以此类推。因此，最终我们要计算的概率： $$P(B)=1-\frac{365\cdot364\cdot...\cdot(365-23&#43;1)}{365^{23}}\approx0.507$$ 令人惊讶的是，这个概率竟然在50%左右！2014世界杯共有32支球队参加，每支球队有队员同天生日的概率大概是50%，那么计算一下期望，会发现大约有16支球队的球员存在同天生日的情况，与实际情况完全相符。
1.3 考虑$n$个人的情况 这似乎有些反直觉，现在我们考虑：$n(n \ge 2)$ 的情况，即$n$个人中，至少两人的生日在同一天。将概率式改写为函数，其自变量$n$表示人数，于是有： $$f(n)=1-\frac{P_{365}^{n}}{365^{n}}$$ 使用Python来绘制这个函数图像:
import matplotlib.pyplot as plt import math # Define the function f(n) def f(n): if n &lt;= 1: return 0 else: p_a = math.perm(365, n)/(365**n) return round(1 - p_a, 5) # Generate values n_values = list(range(1,101)) f_values = [f(n) for n in n_values] # Plot f(n) plt.">




  <meta itemprop="name" content="古典概型和一些经典问题(更新中)">
  <meta itemprop="description" content="最基础的一些内容 概率三公理：非负；和为1；互斥可加 古典概率：有限个&#43;等可能 1 古典概型中的生日问题 1.1 问题的引入 2014年的巴西世界杯，共有32支球队参与。其中有16支球队的球员有同天生日的情况。如巴西队的Hulk和Paulinho，他们的生日都是7月25号。我们知道，一支完整的足球队人数为23人，那么2014年，半数球队有队员同天生日，是否是偶然的呢？
1.2 概率的角度 我们先来解决这个问题：假设每个人的生日在365天中任意一天的概率是相同的，那么23人中，至少两人的生日在同一天的概率是多少？
从问题的反面来考虑会比较容易，记事件$A$为所有人的生日都不同，那么这个事件的反面事件$B$就是至少两人的生日在同一天。我们所要求的就是： $$P(B)=1-P(A)$$ 考察事件$A$：由于每个人的生日在一年中任何一天的概率是相同的，因此分母（所有可能的组合）为：$365^{23}$，即每个人的生日都有可能在365天中任意一天。分子为：$P_{365}^{23}$，可以这么考虑：第1个人选365天中任意一天，第2个人在剩下364天里选一天…以此类推。因此，最终我们要计算的概率： $$P(B)=1-\frac{365\cdot364\cdot...\cdot(365-23&#43;1)}{365^{23}}\approx0.507$$ 令人惊讶的是，这个概率竟然在50%左右！2014世界杯共有32支球队参加，每支球队有队员同天生日的概率大概是50%，那么计算一下期望，会发现大约有16支球队的球员存在同天生日的情况，与实际情况完全相符。
1.3 考虑$n$个人的情况 这似乎有些反直觉，现在我们考虑：$n(n \ge 2)$ 的情况，即$n$个人中，至少两人的生日在同一天。将概率式改写为函数，其自变量$n$表示人数，于是有： $$f(n)=1-\frac{P_{365}^{n}}{365^{n}}$$ 使用Python来绘制这个函数图像:
import matplotlib.pyplot as plt import math # Define the function f(n) def f(n): if n &lt;= 1: return 0 else: p_a = math.perm(365, n)/(365**n) return round(1 - p_a, 5) # Generate values n_values = list(range(1,101)) f_values = [f(n) for n in n_values] # Plot f(n) plt.">
  <meta itemprop="datePublished" content="2024-08-08T21:29:42+08:00">
  <meta itemprop="dateModified" content="2024-08-08T21:29:42+08:00">
  <meta itemprop="wordCount" content="272">
  <meta itemprop="keywords" content="Math,Probability">
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  body {
    font-family: Verdana, sans-serif;
    margin: auto;
    padding: 20px;
    max-width: 720px;
    text-align: left;
    background-color: #fff;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: #444;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  strong,
  b {
    color: #222;
  }

  a {
    color: #3273dc;
     
  }

  .title {
    text-decoration: none;
    border: 0;
  }

  .title span {
    font-weight: 400;
  }

  nav a {
    margin-right: 10px;
  }

  textarea {
    width: 100%;
    font-size: 16px;
  }

  input {
    font-size: 16px;
  }

  content {
    line-height: 1.6;
  }

  table {
    width: 100%;
  }

  img {
    max-width: 100%;
  }

  code {
    padding: 2px 5px;
    background-color: #f2f2f2;
  }

  pre code {
    color: #222;
    display: block;
    padding: 20px;
    white-space: pre-wrap;
    font-size: 14px;
    overflow-x: auto;
  }

  div.highlight pre {
    background-color: initial;
    color: initial;
  }

  div.highlight code {
    background-color: unset;
    color: unset;
  }

  blockquote {
    border-left: 1px solid #999;
    color: #222;
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px;
    text-align: center;
  }

  .helptext {
    color: #777;
    font-size: small;
  }

  .errorlist {
    color: #eba613;
    font-size: small;
  }

   
  ul.blog-posts {
    list-style-type: none;
    padding: unset;
  }

  ul.blog-posts li {
    display: flex;
  }

  ul.blog-posts li span {
    flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
    color: #8b6fcb;
  }

  @media (prefers-color-scheme: dark) {
    body {
      background-color: #333;
      color: #ddd;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    strong,
    b {
      color: #eee;
    }

    a {
      color: #8cc2dd;
    }

    code {
      background-color: #777;
    }

    pre code {
      color: #ddd;
    }

    blockquote {
      color: #ccc;
    }

    textarea,
    input {
      background-color: #252525;
      color: #ddd;
    }

    .helptext {
      color: #aaa;
    }
  }

</style>


  
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath: [['$', '$']]                  
    }
  };
</script>

  
</head>

<body>
  <header><a href="/" class="title">
  <h2>Another archive</h2>
</a>
<nav><a href="/">Home</a>

<a href="/bear/">Bear</a>


<a href="/blog">Blog</a>

</nav>
</header>
  <main>

<h1>古典概型和一些经典问题(更新中)</h1>
<p>
  <i>
    <time datetime='2024-08-08' pubdate>
      08 Aug, 2024
    </time>
  </i>
</p>

<content>
  <h2 id="最基础的一些内容">最基础的一些内容</h2>
<ul>
<li>概率三公理：非负；和为1；互斥可加</li>
<li>古典概率：有限个+等可能</li>
</ul>
<h3 id="1-古典概型中的生日问题">1 古典概型中的生日问题</h3>
<h4 id="11-问题的引入">1.1 问题的引入</h4>
<p>2014年的巴西世界杯，共有<strong>32支球队</strong>参与。其中有<strong>16支球队的球员有同天生日的情况</strong>。如巴西队的Hulk和Paulinho，他们的生日都是7月25号。我们知道，一支完整的足球队人数为<strong>23人</strong>，那么2014年，半数球队有队员同天生日，是否是偶然的呢？</p>
<h4 id="12-概率的角度">1.2 概率的角度</h4>
<p>我们先来解决这个问题：假设<strong>每个人的生日在365天中任意一天的概率是相同的</strong>，那么<strong>23人</strong>中，<strong>至少两人的生日在同一天</strong>的概率是多少？</p>
<p>从问题的反面来考虑会比较容易，记事件$A$为所有人的生日都不同，那么这个事件的反面事件$B$就是至少两人的生日在同一天。我们所要求的就是：
</p>
$$
P(B)=1-P(A)
$$
<p>
考察事件$A$：由于每个人的生日在一年中任何一天的概率是相同的，因此分母（所有可能的组合）为：$365^{23}$，即每个人的生日都有可能在365天中任意一天。分子为：$P_{365}^{23}$，可以这么考虑：第1个人选365天中任意一天，第2个人在剩下364天里选一天&hellip;以此类推。因此，最终我们要计算的概率：
</p>
$$P(B)=1-\frac{365\cdot364\cdot...\cdot(365-23+1)}{365^{23}}\approx0.507$$
<p>
令人惊讶的是，这个概率竟然在50%左右！2014世界杯共有<strong>32支球队</strong>参加，每支球队有队员同天生日的概率大概是<strong>50%</strong>，那么计算一下期望，会发现大约有<strong>16支球队</strong>的球员存在同天生日的情况，与实际情况完全相符。</p>
<h4 id="13-考虑n个人的情况">1.3 考虑$n$个人的情况</h4>
<p>这似乎有些反直觉，现在我们考虑：$n(n \ge 2)$ 的情况，即$n$个人中，至少两人的生日在同一天。将概率式改写为函数，其自变量$n$表示人数，于是有：
</p>
$$f(n)=1-\frac{P_{365}^{n}}{365^{n}}$$
<p>
使用<code>Python</code>来绘制这个函数图像:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#66d9ef">as</span> plt
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> math
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Define the function f(n)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f</span>(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> n <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        p_a <span style="color:#f92672">=</span> math<span style="color:#f92672">.</span>perm(<span style="color:#ae81ff">365</span>, n)<span style="color:#f92672">/</span>(<span style="color:#ae81ff">365</span><span style="color:#f92672">**</span>n)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> round(<span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> p_a, <span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Generate values</span>
</span></span><span style="display:flex;"><span>n_values <span style="color:#f92672">=</span> list(range(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">101</span>))
</span></span><span style="display:flex;"><span>f_values <span style="color:#f92672">=</span> [f(n) <span style="color:#66d9ef">for</span> n <span style="color:#f92672">in</span> n_values]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Plot f(n)</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">6</span>), dpi<span style="color:#f92672">=</span><span style="color:#ae81ff">300</span>)  <span style="color:#75715e"># img size and dpi</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>plot(n_values, f_values, <span style="color:#e6db74">&#39;o&#39;</span>, markersize<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;$f(n) = 1 - </span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">frac{P_</span><span style="color:#e6db74">{365}</span><span style="color:#e6db74">^</span><span style="color:#e6db74">{n}</span><span style="color:#e6db74">}{365^n}$&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add vertical and horizontal lines at n=40</span>
</span></span><span style="display:flex;"><span>n_40 <span style="color:#f92672">=</span> <span style="color:#ae81ff">40</span>
</span></span><span style="display:flex;"><span>f_40 <span style="color:#f92672">=</span> f_values[<span style="color:#ae81ff">39</span>]
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>axvline(x<span style="color:#f92672">=</span><span style="color:#ae81ff">40</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;r&#39;</span>, linestyle<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;--&#39;</span>, label<span style="color:#f92672">=</span><span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;n=</span><span style="color:#e6db74">{</span>n_40<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>axhline(y<span style="color:#f92672">=</span>f_values[<span style="color:#ae81ff">39</span>], color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;r&#39;</span>, linestyle<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;--&#39;</span>, label<span style="color:#f92672">=</span><span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;f(</span><span style="color:#e6db74">{</span>n_40<span style="color:#e6db74">}</span><span style="color:#e6db74">)=</span><span style="color:#e6db74">{</span>f_40<span style="color:#e6db74">:</span><span style="color:#e6db74">.3</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add point annotate</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>annotate(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;(</span><span style="color:#e6db74">{</span>n_40<span style="color:#e6db74">}</span><span style="color:#e6db74">, </span><span style="color:#e6db74">{</span>f_40<span style="color:#e6db74">:</span><span style="color:#e6db74">.3f</span><span style="color:#e6db74">}</span><span style="color:#e6db74">)&#39;</span>, xy<span style="color:#f92672">=</span>(n_40, f_40), xytext<span style="color:#f92672">=</span>(n_40<span style="color:#f92672">+</span><span style="color:#ae81ff">8</span>, f_40<span style="color:#f92672">+</span><span style="color:#ae81ff">0.01</span>),
</span></span><span style="display:flex;"><span>             arrowprops<span style="color:#f92672">=</span>dict(facecolor<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;black&#39;</span>),
</span></span><span style="display:flex;"><span>             fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">12</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;red&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add label</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>xlabel(<span style="color:#e6db74">&#39;n&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>ylabel(<span style="color:#e6db74">&#39;f(n)&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Plot of the function $f(n) = 1 - </span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">frac{P_</span><span style="color:#e6db74">{365}</span><span style="color:#e6db74">^</span><span style="color:#e6db74">{n}</span><span style="color:#e6db74">}{365^n}$&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>legend()
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img src="pics/Fig.1_f(n).png" alt="f(n)的函数图像" title="f(n)的函数图像"></p>
<p>根据图像可以发现，当人数$n$达到40时，概率已经达到89%，而当$n$达到57时，概率超过了99%，换句话说，如果你的班级上有57个或更多人，那么你几乎可以肯定，至少有两个人的生日在同一天！</p>
<p>上述问题也被称作伴生缘问题，更多相关内容可浏览<a href="https://zh.wikipedia.org/wiki/%E7%94%9F%E6%97%A5%E5%95%8F%E9%A1%8C" title="wikipedia">维基百科词条</a>。</p>
<h3 id="2-配对问题">2 配对问题</h3>
<h4 id="21-问题的引入">2.1 问题的引入</h4>
<p>某天你过生日，一共有30人参加了聚会，这30个人每人带了一件各不相同的礼物。聚会期间，大家随机抽取一件礼物，那么<strong>至少有一人</strong>抽取到自己礼物的几率有多大？</p>
<h4 id="22-前置知识">2.2 前置知识</h4>
<p>为了便于后续的推导，先回顾一下$n$个事件的加法公式：
</p>
$$
P(A)=\Sigma_{i=1}^{n}P(A_i)-\Sigma_{1\le i\le j\le n}P(A_iA_j)+...+(-1)^{n-1}P(A_1A_2...A_n)
$$
<h4 id="23-问题的求解">2.3 问题的求解</h4>
<p>设：$A$表示事件：至少有一人抽到了自己的礼物，$A_i$表示事件：第$i$个人抽到了自己的礼物。那么：
</p>
$$
P(A)=P(A_1\cup A_2\cup ...\cup A_{30})
$$
<p>
根据$n$个事件的加法公式，我们得到：
</p>
$$
P(A)=\Sigma_{i=1}^{30}P(A_i)-\Sigma_{1\le i\le j\le 30}P(A_iA_j)+...+(-1)^{30-1}P(A_1A_2...A_{30})
$$
<p>
先考虑1个人的情况：如果是第1个人抽到了自己的礼物，该事件$P(A_1)$的概率为：$P(A_1)=\frac{1}{30}$。这个概率对于第2个人，第3个人,&hellip;,第30个人都是相同的，因此1个人的情况总概率为：$\Sigma_{i=1}^{30}P(A_i)=30\cdot\frac{1}{30}$</p>
<p>接着，考虑任意2个人抽到自己礼物的情况，如果是第1个人和第2个人抽到了自己的礼物，该事件$P(A_1A_2)$的概率为：$\frac{1}{30}\cdot\frac{1}{29}$。该几率对于任意两人抽到自己的礼物是一样的，而30人共有$C_{30}^2$种组合，因此2个人的情况总概率为：$C_{30}^2 \frac{(30-2)!}{30!}$</p>
<p>根据上述思路，不难发现若是$n$个人抽到自己的礼物，那么概率为：$C_{30}^n\frac{(30-n)!}{30!}$。接着，我们只要按照加法公式，确定每项的正负号之后求和即可。</p>
<h4 id="24-进一步考虑">2.4 进一步考虑</h4>
<p>我们现在进一步将上述问题推广到$N$个人的情况：$N$个人在$N$份不同的礼物中随机抽取，每个人能抽取且仅能抽取1份礼物，求至少有1个人抽到自己礼物的概率。有了之前的经验，很快能写出这个式子：
</p>
$$
P(A)=C_{N}^1\frac{1}{N}-C_{N}^2\frac{(N-2)!}{N!}+C_{N}^{3}\frac{(N-3)!}{N!}-...+(-1)^{N-1}C_{N}^{N}\frac{1}{N}
$$
<p>
这个看上去有些复杂的式子可以进一步化简。第一项为1，对后面各项，我们把组合数打开，化简后可以得到：
</p>
$$
P(A)=1-\frac{1}{2!}+\frac{1}{3!}-\frac{1}{4!}+...+(-1)^{N-1}\frac{1}{N}
$$
<p>
到了这一步还可以继续化简，我们先写一下$e^x$的展开式：
</p>
$$
e^x=1+x+\frac{x^2}{2!}+\frac{x^3}{3!}+...+\frac{x^n}{n!}
$$
<p>
那么我们给$P(A)$在最前面加上$(1-1)$就得到了：
</p>
$$
P(A)=1-1+1-\frac{1}{2!}+\frac{1}{3!}-...+(-1)^{N-1}\frac{1}{N}
$$
$$
\Rightarrow P(A)=1-(1-1+\frac{1}{2!}-\frac{1}{3!}+...-(-1)^{N-1}\frac{1}{N})
$$
<p>
而括号内的部分正好是当$x=1$时$e^x$的展开式，因此当$N\rightarrow+\infty$时，$P(A)$的极限约为$1-e^{-1}\approx0.632$。</p>
<h3 id="3-三门问题与条件概率">3 三门问题与条件概率</h3>
<h4 id="31-条件概率与乘法公式">3.1 条件概率与乘法公式</h4>
$$
P(B|A)=\frac{P(AB)}{P(A)}
$$
<p>
根据这个式子可以推出$n$个事件的乘法公式。对于两事件：
</p>
$$
P(AB)=P(A)P(B|A)
$$
<p>
对于三事件：
</p>
$$
P(ABC)=P(AB)P(C|AB)=P(A)P(B|A)P(C|AB)
$$
<p>
于是对于$n$个事件，有：
</p>
$$
P(A_1A_2...A_n)=P(A_1)P(A_2|A_1)P(A_3|A_1A_2)...P(A_n|A_1A_2...A_n)
$$
<h4 id="32-三门问题">3.2 三门问题</h4>
<p>在参加一档电视节目中，你参加了这样一个游戏：你的面前有三扇门，其中一扇门后面有大奖，而另外两扇门后面只是山羊，现在，你选定了一扇门后，主持人打开了一扇后面有山羊的门（主持人知道三扇门后面分别是什么，他会选择一扇有山羊的门打开）。接着主持人问你：你是要坚持原来的选择，还是换一扇门呢？哪种选择更有可能获得大奖？
<img src="pics/Fig.2_doors.png" alt="三门问题" title="三门问题">
我们来看看这个游戏所有可能的情况，用一个表格列出来：</p>
<table>
<thead>
<tr>
<th>Door 1</th>
<th>Door 2</th>
<th>Door 3</th>
</tr>
</thead>
<tbody>
<tr>
<td>大奖</td>
<td>山羊</td>
<td>山羊</td>
</tr>
<tr>
<td>山羊</td>
<td>大奖</td>
<td>山羊</td>
</tr>
<tr>
<td>山羊</td>
<td>山羊</td>
<td>大奖</td>
</tr>
</tbody>
</table>
<p>假设我们一开始选择第1扇门，那么在主持人打开第3扇门的情况下（事件$B$），大奖在第1扇门（事件$A$）的概率是多少呢？
</p>
$$
P(A|B)=\frac{P(B|A)P(A)}{P(B)}
$$
<p>
我们先来看分子，$P(B|A)$是指，当大奖在第1扇门的时候，主持人开第3扇门的概率，因为第2、第3扇门后都是羊，所以这个概率值是$\frac{1}{2}$；$P(A)$是指大奖在第1扇门后的概率，这个值显然为$\frac{1}{3}$。接着看分母，主持人打开第3扇门的概率，这可以拆解为大奖分别在第1、第2、第3扇门后的概率之和，即：$\frac{1}{3}\cdot\frac{1}{2}+\frac{1}{3}\cdot1+\frac{1}{3}\cdot0$。</p>
<p>代入计算后发现，$P(A|B)=\frac{1}{3}$，也就是说，如果我们换一个门，那么获得大奖的概率为$\frac{2}{3}$。</p>
<p>这可能和有些同学想的不一样，问题的关键在于，<strong>主持人是知道门后面是什么的，他会根据我们选择，必定选取一扇有羊的门，主持人开门相当于帮我们排除了一个错误答案</strong>。也可以这样考虑，如果你的面前有100扇门，只有一扇门后面有大奖，这个时候主持人帮你排除了一扇错误门，这个时候重新选择，中将概率是否感觉高了一些？</p>
<p>关于这个问题在许多BBS上都有讨论，这里给出<a href="https://www.coursera.org/learn/prob1/discussions/forums/JlZ3wyj4EeaZ8Apto8QB_w/threads/FD-O9_NYEeaLjw4_t1TJig">coursera上的一个讨论</a>。</p>
<h3 id="4-n门问题与全概率公式">4 $n$门问题与全概率公式</h3>
<h4 id="41-全概率公式">4.1 全概率公式</h4>
<p>设样本空间$S$可划分为$S=B_1\cup B_2\cup &hellip; \cup B_n$，$A=AB_1\cup AB_2\cup &hellip; \cup AB_n$且$AB_1&hellip;AB_n$两两不相容，那么：
</p>
$$
P(A)=P(AB_1)+P(AB_2)+...+P(AB_n)=P(A|B_1)P(B_1)+...+P(AB_n|B_n)P(B_n)
$$
<h4 id="42-n门问题">4.2 $n$门问题</h4>
<p>在3.2节中，我们讨论了经典的三门问题，这里我们来看一下这个问题的变种：假设现在你的面前有<strong>9扇门</strong>，其中<strong>1扇门</strong>后面是车，而另外<strong>8扇门</strong>后面都是羊。你首先随意选择了一扇门，之后，主持人打开了<strong>7扇</strong>后面是羊的门，请问这个时候，选择换门能得到汽车大奖的概率是多少？
<img src="pics/Fig.3_doors.png" alt="9扇门的情况" title="9扇门的情况"></p>
<p>我们设事件$A$：换门之后中大奖，事件$B_i$：最初选择了第$i$扇门。假设大奖在第一扇门后面，那么我们可以知道：$P(A|B_1)=0,P(A|B_i)=1(i=2,3,&hellip;,9)$。由于最初我们选择的门是随机的，也就是选择任意一扇门的概率都是$\frac{1}{9}$。我们关心的是事件$A$，于是根据全概率公式，有：
</p>
$$
P(A)=P(AB_1)+P(AB_2)+...+P(AB_9)=P(A|B_1)P(B_1)+...+P(AB_9|B_9)P(B_9)
$$
$$
P(A)=0\cdot\frac{1}{9}+1\cdot\frac{1}{9}+...+1\cdot\frac{1}{9}=\frac{8}{9}
$$
<h3 id="5-贝叶斯bayesian公式">5 贝叶斯(Bayesian)公式</h3>

</content>

<script src="https://giscus.app/client.js"
        data-repo="lsnotgu/lsnotgu.github.io"
        data-repo-id="R_kgDOMf6mdA"
        data-category="Announcements"
        data-category-id="DIC_kwDOMf6mdM4Chj2B"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>


<p>
  
  <a href="https://lsnotgu.github.io/blog/math/">#Math</a>
  
  <a href="https://lsnotgu.github.io/blog/probability/">#Probability</a>
  
</p>

  </main>
  <footer>Made with <a href="https://github.com/janraasch/hugo-bearblog/">Hugo ʕ•ᴥ•ʔ Bear</a>
</footer>

    
</body>

</html>
